\section{Control Module}

The control module is responsible for coordinating the activity of the
other parts of the image processor and for data transfer into and within
the image processor. A visual overview of the control module is given in
figure \ref{fig:control-module}.

\input{fig/fpga/control_module}

The control module decodes the state signal set by the AVR, and enables,
disables and resets components accordingly. It is responsible for
performing data transfers between the AVR and the program/data memories,
and for transferring data internally, between the SIMD node array, data
RAM and the VGA screen buffer.

The control module contains the CPU core that is used for the non-SIMD
instructions embedded in a program. This CPU core, henceforth referred
to as the \emph{control core}, is mainly concerned with loop control,
initiating data transfers between the SIMD node array and the data RAM,
and copying image data to the VGA controller.

\subsection{States}

The operation of the image processor is fully controlled by the SCU. The
SCU sets a state value that is used by the control module to select
which components of the image processor are active. This is indicated by
the red signals in figure \ref{fig:control-module}.

The states recognized by the image processor are listed in table
\ref{tab:states}.

\input{fig/fpga/states}

\subsection{Control Core}
\subsection{DMA}
\subsection{Program Flow}
